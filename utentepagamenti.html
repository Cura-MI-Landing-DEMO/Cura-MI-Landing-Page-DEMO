<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pagamento – Utenti Cura‑MI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <style>
    :root {
      --teal: #139395;
      --gold: #FDC043;
      --slate: #394e65;
      --bg: #f4f6f8;
      --celeste: #B2FFFF;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:Arial,sans-serif;background:var(--bg);color:var(--slate);min-height:100vh;display:flex;flex-direction:column;}
    .navbar{background:var(--gold);padding:12px 20px;display:flex;align-items:center;gap:24px;flex-wrap:wrap;}
    .navbar img{height:40px;}
    .navbar .user-nav{display:flex;gap:24px;margin-left:auto;}
    .user-nav a{color:var(--slate);text-decoration:none;font-weight:bold;font-size:18px;}
    .user-nav a:hover{text-decoration:underline;}
    .demo-banner{background:var(--celeste);color:var(--slate);text-align:center;padding:12px;font-weight:bold;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
    .main-container{flex:1;padding:20px;display:flex;justify-content:center;}
    .content{max-width:600px;width:100%;}
    .demo-intro{background:white;padding:16px;margin-bottom:20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);text-align:center;font-weight:bold;}
    .widget-row{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px;}
    .widget{background:white;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
    .widget h3{margin-bottom:16px;color:var(--teal);}
    .widget .chart-placeholder{height:150px;background:var(--bg);border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--slate);font-size:14px;}
    .payment-list{list-style:none;}
    .payment-list li{margin-bottom:10px;padding:8px 12px;background:var(--bg);border-radius:6px;display:flex;justify-content:space-between;}
    .contact-icons{position:fixed;bottom:20px;right:20px;display:flex;flex-direction:column;gap:12px;z-index:2000;}
    .icon-btn{width:48px;height:48px;border-radius:50%;font-size:22px;display:flex;align-items:center;justify-content:center;color:white;cursor:pointer;transition:transform .2s;}
    .icon-btn.call{background:var(--teal);}
    .icon-btn.whatsapp{background:#25D366;}
    .icon-btn:hover{transform:scale(1.1);}
    .footer{margin-top:40px;}
    .glass-footer{background:rgba(255,255,255,0.22);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);border-top:1px solid rgba(255,255,255,0.45);box-shadow:0 -6px 18px rgba(0,0,0,0.06);padding:20px 16px;font-size:14px;}
    .footer-content{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:16px;text-align:center;}
    .footer-left a,.footer-right a{color:var(--teal);text-decoration:none;font-weight:600;transition:color .2s;}
    .footer-left a:hover,.footer-right a:hover{color:#0f7e80;}
  </style>
</head>
<body>

  <div class="navbar">
    <img src="images/logocurami.png" alt="Logo Cura‑MI">
    <div class="user-nav">
      <a href="#">Prenotazioni</a>
      <a href="#">Pagamento</a>
      <a href="#">Profilo</a>
      <a href="index.html">Esci</a>
    </div>
  </div>

  <div class="demo-banner">
    ⚠️ Questa è una <strong>DEMO dimostrativa</strong>. Non vengono raccolti dati sensibili.
  </div>

  <div class="main-container">
    <div class="content">
      <div class="demo-intro">
        Se hai prenotazioni confermate, scegli il metodo di pagamento qui sotto
      </div>

      <div class="widget-row">
        <div class="widget" id="widgetTotals">
          <h3>Totale Pagamenti</h3>
          <div class="chart-placeholder">[Grafico: Online / Contanti]</div>
        </div>
        <div class="widget" id="widgetList">
          <h3>Da Pagare</h3>
          <ul class="payment-list" id="paymentList">
            <!-- prenotazioni in attesa -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="contact-icons">
    <a href="tel:+393331234567" class="icon-btn call"><i class="fa-solid fa-phone"></i></a>
    <a href="https://wa.me/393331234567" target="_blank" class="icon-btn whatsapp"><i class="fa-brands fa-whatsapp"></i></a>
  </div>

  <footer class="footer glass-footer">
    <div class="footer-content">
      <div class="footer-left"><a href="#">© 2025 Cura‑MI</a></div>
      <div class="footer-center"><p>Demo interattiva – dati fittizi. Provala Subito!</p></div>
      <div class="footer-right"><a href="#">Privacy</a></div>
    </div>
  </footer>

  <script>
    const STORAGE_KEY = 'userBookings';
    const widgetTotals = document.getElementById('widgetTotals');
    const paymentList = document.getElementById('paymentList');

    function loadPayments() {
      const all = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const pendings = all.filter(b => b.status === 'Confermato');
      let online = 0, contanti = 0;

      pendings.forEach(b => {
        if (b.paymentMethod === 'online') online++;
        else if (b.paymentMethod === 'contanti') contanti++;
      });

      widgetTotals.querySelector('.chart-placeholder').innerHTML = `
        <div>Online: <strong>${online}</strong></div>
        <div>Contanti: <strong>${contanti}</strong></div>
      `;

      paymentList.innerHTML = '';
      pendings.forEach((b, i) => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${b.service} – ${b.date} ${b.time}</span>
          <button onclick="markPaid(${i})">Segna come Pagato</button>
        `;
        paymentList.appendChild(li);
      });
      if (pendings.length === 0) paymentList.innerHTML = '<li>Nessuna prenotazione in attesa di pagamento</li>';
    }

    function markPaid(index) {
      const all = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      const confirmed = all.filter(b => b.status === 'Confermato');
      const booking = confirmed[index];
      booking.status = 'Pagato';
      localStorage.setItem(STORAGE_KEY, JSON.stringify(all));
      loadPayments();
    }

    document.addEventListener('DOMContentLoaded', loadPayments);
  </script>
</body>
</html>
